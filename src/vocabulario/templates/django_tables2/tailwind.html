{% load django_tables2 %}
{% load i18n l10n %}

{% block table-wrapper %}
<div class="overflow-x-auto rounded-xl shadow-lg bg-slate-900 mt-4">
    {% block table %}
    <table class="min-w-full divide-y divide-slate-700 text-white">
        {% block table.thead %}
        {% if table.show_header %}
        <thead class="bg-slate-800">
            <tr>
                {% for column in table.columns %}
                <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider {% if column.orderable %}cursor-pointer hover:text-blue-400{% endif %}">
                    {% if column.orderable %}
                        <a href="{% querystring table.prefixed_order_by_field=column.order_by_alias.next %}" class="flex items-center gap-1">
                            {{ column.header }}
                            {% if column.is_ordered %}
                                <svg class="inline w-3 h-3 {% if column.order_by_alias.is_descending %}rotate-180{% endif %}" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                                </svg>
                            {% endif %}
                        </a>
                    {% else %}
                        {{ column.header }}
                    {% endif %}
                    {% if column.filter %}
                        <div class="mt-2">
                            {{ column.filter.form.as_widget }}
                        </div>
                    {% endif %}
                </th>
                {% endfor %}
            </tr>
        </thead>
        {% endif %}
        {% endblock table.thead %}

        {% block table.tbody %}
        <tbody class="divide-y divide-slate-800">
            {% for row in table.paginated_rows %}
            <tr class="hover:bg-slate-800 transition">
                {% for column, cell in row.items %}
                <td class="px-6 py-3 align-middle">
                    {% if column.localize == None %}
                        {{ cell }}
                    {% else %}
                        {% if column.localize %}
                            {{ cell|localize }}
                        {% else %}
                            {{ cell|unlocalize }}
                        {% endif %}
                    {% endif %}
                </td>
                {% endfor %}
            </tr>
            {% empty %}
            <tr>
                <td colspan="{{ table.columns|length }}" class="px-6 py-4 text-center text-slate-400">
                    {{ table.empty_text }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
        {% endblock table.tbody %}

        {% block table.tfoot %}
        {% if table.has_footer %}
        <tfoot class="bg-slate-800">
            <tr>
                {% for column in table.columns %}
                <td class="px-6 py-3">{{ column.footer }}</td>
                {% endfor %}
            </tr>
        </tfoot>
        {% endif %}
        {% endblock table.tfoot %}
    </table>
    {% endblock table %}

    {% block pagination %}
    {% if table.page and table.paginator.num_pages > 1 %}
    <nav class="py-4 flex justify-center" aria-label="Table navigation">
        <ul class="inline-flex -space-x-px">
            {% if table.page.has_previous %}
            <li>
                <a href="{% querystring table.prefixed_page_field=table.page.previous_page_number %}" class="px-3 py-1 rounded-l-lg bg-slate-800 text-blue-300 hover:bg-blue-700 hover:text-white transition">&laquo;</a>
            </li>
            {% endif %}
            {% for p in table.page|table_page_range:table.paginator %}
            <li>
                <a href="{% if p != '...' %}{% querystring table.prefixed_page_field=p %}{% else %}#{% endif %}"
                   class="px-3 py-1 {% if table.page.number == p %}bg-blue-700 text-white{% else %}bg-slate-800 text-blue-300 hover:bg-blue-700 hover:text-white{% endif %} transition">
                    {{ p }}
                </a>
            </li>
            {% endfor %}
            {% if table.page.has_next %}
            <li>
                <a href="{% querystring table.prefixed_page_field=table.page.next_page_number %}" class="px-3 py-1 rounded-r-lg bg-slate-800 text-blue-300 hover:bg-blue-700 hover:text-white transition">&raquo;</a>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}
    {% endblock pagination %}
</div>
{% endblock table-wrapper %}
